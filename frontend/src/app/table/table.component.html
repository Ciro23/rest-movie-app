<div class="d-flex flex-column gap-3 mt-4">
  <div class="d-flex justify-content-between align-items-center">
    <p class="m-0">
      Showing {{ paginatedRows.length }} results out of {{ rows.length }}
    </p>

    <div class="d-flex gap-3">
      <button (click)="openDownloadXlsxConfirmationDialog()" class="btn btn-secondary">
        XLSX
        <i class="bi bi-file-earmark-excel"></i>
      </button>

      <button (click)="onCreateNew()" class="btn btn-primary">
        <i class="bi bi-plus-lg"></i>
      </button>
    </div>
  </div>

  <p *ngIf="rows.length === 0" class="text-center mt-2">
    {{ noRowsFoundMessage }}
  </p>

  <table *ngIf="paginatedRows.length > 0" class="table table-bordered table-hover">
    <thead>
    <tr>
      <th *ngFor="let field of fields">
        <span
          (click)="sortRows(field)"
          style="cursor: pointer;"
          class="d-flex justify-content-between align-items-center">
          {{ field.name }}

          <span *ngIf="sortedField === field">
            {{ sortOrder === 'asc' ? '▲' : '▼' }}
          </span>

          <span *ngIf="sortedField !== field">
            <i class="fa fa-fw fa-sort"></i>
          </span>
        </span>
      </th>
      <th>Actions</th>
    </tr>
    </thead>

    <tbody>
    <tr *ngFor="let row of paginatedRows">
      <td *ngFor="let field of fields" class="align-middle"
          [ngClass]="{'text-end': isNumber(field.getRawValue(row))}">

        {{ field.getFormattedValue ? field.getFormattedValue(row) : field.getRawValue(row) }}
      </td>

      <td class="align-middle d-flex justify-content-center">
        <app-action-buttons
          [onView]="onView ? getOnView(row.id) : undefined"
          [onEdit]="onEdit ? getOnEdit(row.id) : undefined"
          [onDownloadPdf]="onDownloadPdf ? getOnDownloadPdf(row.id) : undefined"
          [onDelete]="onDelete ? getOnDelete(row.id) : undefined"></app-action-buttons>
      </td>
    </tr>
    </tbody>
  </table>

  <!-- Pagination Controls -->
  <nav *ngIf="rows.length > pageSize" aria-label="Page navigation">
    <ul class="pagination justify-content-center">
      <li class="page-item" [class.disabled]="currentPage === 0">
        <button class="page-link" (click)="goToPage(currentPage - 1)">Previous</button>
      </li>
      <li class="page-item"
          *ngFor="let i of [].constructor(totalPages); let index = index"
          [class.active]="currentPage === index">
        <button class="page-link" (click)="goToPage(index)">{{ index + 1 }}</button>
      </li>
      <li class="page-item" [class.disabled]="currentPage === totalPages - 1">
        <button class="page-link" (click)="goToPage(currentPage + 1)">Next</button>
      </li>
    </ul>
  </nav>
</div>
